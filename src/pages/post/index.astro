---
import { getCollection } from 'astro:content'
import ListLayout from '~/layouts/List.astro'
import PostCard from '~/components/PostCard.astro'

const postEntries = await getCollection('blog')
const postEntriesSorted = postEntries.sort((a, b) => {
  const aTime = new Date(a.data.modifiedTime ?? a.data.publishedTime).getTime()
  const bTime = new Date(b.data.modifiedTime ?? b.data.publishedTime).getTime()
  return bTime - aTime
})
---

<ListLayout>
  {postEntriesSorted.map(entry => (
    <PostCard entry={entry} />
  ))}
</ListLayout>
